ğŸ§© Cáº¤U HÃŒNH MIKROTIK â€“ PHÃ‚N 4 Máº NG RIÃŠNG (CHO 4 WIFI RIÃŠNG)

Thiáº¿t bá»‹: Mini PC N5095 (RouterOS v7.12.1)
Má»¥c tiÃªu: Táº¡o 4 route riÃªng biá»‡t â€“ má»—i SSID trÃªn Redmi AX6 (OpenWRT) sáº½ ra 1 IP WAN khÃ¡c nhau.

âš™ï¸ 1ï¸âƒ£ Cá»•ng váº­t lÃ½ & káº¿t ná»‘i thá»±c táº¿
Cá»•ng	Thiáº¿t bá»‹ ná»‘i	MÃ´ táº£
ether4	Cá»•ng ONS (nhÃ  máº¡ng)	PPPoE (WAN tá»•ng)
ether3	Router Redmi AX6 (OpenWRT)	LAN ra OpenWRT (giao tiáº¿p VLAN)
ether2 / ether1	Dá»± phÃ²ng	KhÃ´ng dÃ¹ng hiá»‡n táº¡i
ğŸŒ 2ï¸âƒ£ PPPoE Clients (4 phiÃªn riÃªng biá»‡t)

Táº¡o 4 PPPoE client Ä‘á»ƒ nháº­n 4 IP Ä‘á»™ng riÃªng tá»« nhÃ  máº¡ng:

Name	Interface	TÃ¬nh tráº¡ng	Ghi chÃº
pppoe-out1	ether4	Connected	IP riÃªng #1
pppoe-out2	ether4	Connected	IP riÃªng #2
pppoe-out3	ether4	Connected	IP riÃªng #3
pppoe-out4	ether4	Connected	IP riÃªng #4

âš ï¸ Má»—i PPPoE client dÃ¹ng chung user/pass nhÃ  máº¡ng, RouterOS tá»± chia session Ä‘á»™ng.
â€œStatus: connectedâ€ cÃ³ IP local vÃ  remote riÃªng.

ğŸ§± 3ï¸âƒ£ VLAN ná»™i bá»™ (giao tiáº¿p OpenWRT)

Táº¡o 4 VLAN trÃªn cá»•ng LAN ná»‘i OpenWRT (ether3):

VLAN Name	VLAN ID	Interface	Má»¥c Ä‘Ã­ch
vlan10	10	ether3	Cho Wi-Fi 1
vlan20	20	ether3	Cho Wi-Fi 2
vlan30	30	ether3	Cho Wi-Fi 3
vlan40	40	ether3	Cho Wi-Fi 4
ğŸªœ 4ï¸âƒ£ Bridge tÆ°Æ¡ng á»©ng cho má»—i VLAN

Táº¡o 4 bridge, má»—i bridge gáº¯n 1 VLAN tÆ°Æ¡ng á»©ng:

Bridge	Interface gáº¯n	IP ná»™i bá»™	Má»¥c Ä‘Ã­ch
bridge10	vlan10	192.168.10.1/24	Wi-Fi 1
bridge20	vlan20	192.168.20.1/24	Wi-Fi 2
bridge30	vlan30	192.168.30.1/24	Wi-Fi 3
bridge40	vlan40	192.168.40.1/24	Wi-Fi 4
ğŸ“¦ 5ï¸âƒ£ DHCP Server ná»™i bá»™ (phÃ¡t IP cho tá»«ng VLAN)

Má»—i bridge cÃ³ DHCP riÃªng:

Interface	Pool	Range
bridge10	dhcp_pool1	192.168.10.100â€“200
bridge20	dhcp_pool2	192.168.20.100â€“200
bridge30	dhcp_pool3	192.168.30.100â€“200
bridge40	dhcp_pool4	192.168.40.100â€“200
ğŸ” 6ï¸âƒ£ NAT â€“ Ã¡nh xáº¡ 4 WAN riÃªng

Táº¡o 4 rule NAT (masquerade) cho tá»«ng PPPoE:

/ip firewall nat
add chain=srcnat out-interface=pppoe-out1 action=masquerade
add chain=srcnat out-interface=pppoe-out2 action=masquerade
add chain=srcnat out-interface=pppoe-out3 action=masquerade
add chain=srcnat out-interface=pppoe-out4 action=masquerade

ğŸ§­ 7ï¸âƒ£ Routing Table riÃªng cho tá»«ng VLAN

Táº¡o 4 routing table má»›i:

/routing table
add name=route10 fib
add name=route20 fib
add name=route30 fib
add name=route40 fib


VÃ  thÃªm route máº·c Ä‘á»‹nh tÆ°Æ¡ng á»©ng:

/ip route
add dst-address=0.0.0.0/0 gateway=pppoe-out1 routing-table=route10
add dst-address=0.0.0.0/0 gateway=pppoe-out2 routing-table=route20
add dst-address=0.0.0.0/0 gateway=pppoe-out3 routing-table=route30
add dst-address=0.0.0.0/0 gateway=pppoe-out4 routing-table=route40

ğŸ§© 8ï¸âƒ£ Mangle rules (Ä‘Ã¡nh dáº¥u Ä‘á»‹nh tuyáº¿n)
/ip firewall mangle
add chain=prerouting src-address=192.168.10.0/24 action=mark-routing new-routing-mark=route10 passthrough=yes comment="WiFi 1"
add chain=prerouting src-address=192.168.20.0/24 action=mark-routing new-routing-mark=route20 passthrough=yes comment="WiFi 2"
add chain=prerouting src-address=192.168.30.0/24 action=mark-routing new-routing-mark=route30 passthrough=yes comment="WiFi 3"
add chain=prerouting src-address=192.168.40.0/24 action=mark-routing new-routing-mark=route40 passthrough=yes comment="WiFi 4"

ğŸ“¶ 9ï¸âƒ£ Káº¿t ná»‘i vá»›i OpenWRT (Redmi AX6)

Cáº¯m dÃ¢y LAN tá»« ether3 (Mikrotik) â†’ LAN1 (Redmi AX6)

TrÃªn AX6: táº¡o cÃ¡c interface VLAN (eth0.10, .20, .30, .40) vá»›i IP:

192.168.10.2

192.168.20.2

192.168.30.2

192.168.40.2

Gateway & DNS Ä‘á»ƒ trá»‘ng (do Mikrotik cáº¥p).

ğŸ” 10ï¸âƒ£ Káº¿t quáº£ mong Ä‘á»£i
Wi-Fi trÃªn OpenWRT	VLAN	Dáº£i IP	Ra WAN
WiFi1	VLAN10	192.168.10.x	pppoe-out1
WiFi2	VLAN20	192.168.20.x	pppoe-out2
WiFi3	VLAN30	192.168.30.x	pppoe-out3
WiFi4	VLAN40	192.168.40.x	pppoe-out4